<?xml version="1.0" encoding="utf-8"?>
<project basedir="." default="doAll" name="ise_start">

  <!-- note: following properties are passed as parameters via Oxygen:
      -${pd}:  current project directory path (i.e. where the ise.xpr file lives)
      -${play.id}
  -->

  <property name="echo.separator" value="************************************************"/>
  <property name="suggestedplay.id" value=""/>


  <target name="createFile">
    <echo message="${echo.separator}"/>
    <echo message="Checking the supplied id to make sure it's conformant."/>
    <script language="javascript">
      <![CDATA[
        // Get the id which was input in Oxygen
        var suggestedId = ise_start.getProperty("suggestedplay.id");
        var cleanedId = suggestedId.replace(/[^a-z\d]+/, '_').replace(/(^\d)/, 'ise_$1');

        // Set a new property which can be retrieved by the ant script
        ise_start.setProperty("play.id", cleanedId);
      ]]>
    </script>
    <echo message="Cleaned-up id is ${play.id}."/>
    <echo message="Creating a file for this play based on the template and id ${play.id}."/>
    
  </target>
  
  <target name="doAll">
    <antcall target="createFile"/>
  </target>

</project>